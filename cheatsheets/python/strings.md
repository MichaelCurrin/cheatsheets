# Strings


## Resources

- [Python f-strings](https://realpython.com/python-f-strings/) article on RealPython site.
- [Using % and .format() for great good!](https://pyformat.info/) website.


## Make a long number readable


```python
>>> "{:,}".format(12345678910)
```
```
12,345,678,910
```


## Representing objects

Printing a string and using `repr`.

```python
>>> print('abc')
abc
>>> print(repr('abc'))
'abc'
```

Printing using `.format` and `!r`.

```python
>>> print('{}'.format('abc'))
abc
>>> print('{!r}'.format('abc'))
'abc'
```

Without using print, the value is quoted.

```python
>>> '{}'.format('abc')
'abc'
>>> '{!r}'.format('abc')
"'abc'"
```

The `repr` function gives out which can be used to create a new object. So a string must be quoted.

```python
>>> print(repr('abc'))
'abc'
>>> print(repr(123))
123
>>> print(repr(True))
True
```


For classes, the `__repr__` might be set to exactly match the contents so a new instance be created, or it might be a summary. But it won't be set by default.

From [Python String Conversion 101: Why Every Class Needs a “repr”](https://dbader.org/blog/python-repr-vs-str) article.

```python
class Foo:
    def __init__(self, color, mileage):
        self.color = color
        self.mileage = mileage

    def __repr__(self):
       return (f'{self.__class__.__name__}('
               f'{self.color!r}, {self.mileage!r})')

    def __str__(self):
        return f'a {self.color} foo'
```


## Formatting styles

### New style

```python
'{} {}'.format(foo, bar)

'{0} {1}'.format(foo, bar)

'{foo} {bar}'.format(foo=foo, bar=bar)
```

Use f-strings in Python 3.6+.

```python
f'{foo} {bar}'
```

#### Modifiers

Using `repr`.

```python
'{0!r}'.format(foo)
```

Using ASCII
```python
'{0!a}'.format(foo)
```

#### Alignment

Align left.

```python
'{:10}'
'{:<10}'
```

Align right with padding.

```python
'{:>10}'
```

Align center.

```python
'{:^10}'
```

Format integer. Aligns right.

```python
'{:4d}'.format(42)
# => '  42'
```

Round a float.

```python
# Default to 7.6 values (7 total length and 6 after point).
'{:f}'.format(3.141592653589793)
# => '3.141593'

# Custom
'{:3.2f}'.format(3.141592653589793)
# => '3.14'

# Add padding.
'{:06.2f}'.format(3.141592653589793)
# => '003.14'
```


### Old style

```python
'%s  %s' % (foo, bar)
```

### Debugging

```python
logging.debug("User name: %s", name)
```

### Template Strings

> A simpler and less powerful mechanism, but it is recommended when handling format strings generated by users. Due to their reduced complexity template strings are a safer choice.

```
from string import Template


name = 'Elizabeth'
t = Template('Hey $name!')
t.substitute(name=name)
# => 'Hey Elizabeth!'
```


### Resources

- [pyformat.info/](https://pyformat.info/)
- [W3 Schools Python format reference](https://www.w3schools.com/python/ref_string_format.asp)


## Truncate long string

```python
import textwrap


textwrap.shorten("Hello  world!", width=12)
# => 'Hello world!'
textwrap.shorten("Hello  world!", width=11)
# > 'Hello [...]'
textwrap.shorten("Hello world", width=10, placeholder="...")
# => 'Hello...'
```

[source](https://stackoverflow.com/questions/2872512/python-truncate-a-long-string)

```python
'{:.5}'.format('xylophone')
# => 'xylop'
```


## Working with strings

### Repeating strings

```python
>>> '---'*10
'------------------------------'

>>> ['---']*10
['---', '---', '---', '---', '---', '---', '---', '---', '---', '---']

| >>> print(" | ".join(['---']*10)) |
| ----------- | ------------------- ||  |  |  |  |  |  |  |
```

### Convert strings to markdown table

```python
header = "a,b,c".split(',')
row = "1,2,3".split(",")

print(" | ".join(header))
print(" | ".join(['---']*len(header)))
print(" | ".join(row))
```

```markdown
| a   | b   | c   |
| --- | --- | --- |
| 1   | 2   | 3   |
```

| a   | b   | c   |
| --- | --- | --- |
| 1   | 2   | 3   |

### Convert strings to dict

```python
header = "a,b,c".split(',')
row = "1,2,3".split(",")

row_dict = {k: v for k, v in zip(header, row)}

print(row_dict)
# {'a': '1', 'b': '2', 'c': '3'}
```

## Hex color code


### Convert integer to hex string

```python
>>> hex(12525)
'0x30ed'
```

### Remove prefix

```python
>>> "{:x}".format(12525)
'30ed'
```

### Left-pad with spaces

```python
>>> "{:6x}".format(12525)
'  30ed'
```

### Left-pad with zeroes

```python
"{:06x}".format(12525)
'0030ed'
```

### Use f-strings

```python
>>> color_number = 12525
>>> f"{color_number:06x}"
'0030ed'
```

### Hex to integer

```python
>>> x = 0x30ed
>>> type(x)
<type 'int'>
```

Max for 6-digit hex code.

```python
>> 0xffffff
16777215
```

## Textwrap

### Dedent

Remove common whitespace
```python
text = textwrap.dedent("""\
    a
      b
    c
""")
print(text)
```
```
a
  b
c
```


## Case

```python
>>> 'abc d'.title()
'Abc D'
```


```python
>>> 'abc d'.capitalize()
'Abc d'
```

```python
>>> 'abc d'.upper()
'ABC D'
```


## Validate

Built-in string methods to help with validation.

- `isalnum`
- `isalpha`
- `isdigit` 
- `islower`
- `isspace`
- `istitle`
- `isupper`

Examples:

```python
>>> 'abc d'.isupper()
False
>>> 'abc d'.islower()
True
```

Check if alphabet only characters. Note spaces will make this false.

```python
'abc d'.isalpha()
False
>>> 'abcd'.isalpha()
True
```
